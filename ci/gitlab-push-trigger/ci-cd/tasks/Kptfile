apiVersion: kpt.dev/v1
kind: Kptfile
metadata:
  name: rust-tasks
  annotations:
    config.kubernetes.io/local-config: "true"
  namespace: axyomcore-portal
info:
  description: Mananage packages for Rust Tekton tasks.
  keywords:
    - backstage
    - tekton
    - pipelines
    - tasks
    - rust
    - cargo
pipeline:
  mutators:
    - name: set labels
      image: gcr.io/kpt-fn/set-labels:v0.2.0
      configMap:
        app.kubernetes.io/managed-by: kpt
        app.kubernetes.io/component: tekton-task
        app.kubernetes.io/part-of: axyomcore-portal
    - name: set namespace
      image: gcr.io/kpt-fn/set-namespace:v0.4.1
      configMap:
        namespace: axyomcore-portal
        # validators:
        #   - name: validate manifests
        #     image: 'gcr.io/kpt-fn/kubeval:v0.3.0'
        #     configMap:
        #       skip_kinds: 'Tasks'
        #       strict: "true"
        #       ignore_missing_schemas: "true"      
